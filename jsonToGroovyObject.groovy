//==================================//
// TRANSFORM JSON INTO GROOVY OBJECT//
//==================================//

import groovy.json.JsonSlurper

//Create a Groovy object with the JSON string
def jsonObj = new JsonSlurper().parseText('{"_class":"hudson.plugins.jobConfigHistory.JobConfigHistoryProjectAction","jobConfigHistory":[{"currentName":"","date":"2017-01-13_15-46-11","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-45-12","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-43-46","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-43-17","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-42-07","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-41-44","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-37-47","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-36-04","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-31-58","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-30-17","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-24-01","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-22-36","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-22-09","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-21-27","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-17-13","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-15-11","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-13-20","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-11-35","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-10-01","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-06-28","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-04-52","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-04-43","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-04-18","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-02-40","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_15-01-29","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_14-55-56","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_14-55-31","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_14-54-04","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_14-53-31","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_14-48-39","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_14-47-47","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_14-46-51","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_14-44-55","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_14-43-18","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_14-43-17","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_14-29-49","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_14-29-48","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_14-29-47","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_14-29-36","hasConfig":true,"job":"test","oldName":"","operation":"Created","user":"admin","userID":"admin"},{"currentName":"","date":"2017-01-13_14-29-35","hasConfig":true,"job":"test","oldName":"","operation":"Changed","user":"admin","userID":"admin"}]}')            

//Assign newly created object to a variable
History = jsonObj.jobConfigHistory

//Go through each element in the history
History.each { event ->
    // Look for creation event
    if (event.operation == "Created") {
        created = event.date.split("_") // Split date from time of creation
        dayCreated = created[0] // Assign date to variable
        timeCreated = created[1].replace("-",":") // Assign time to variable and replace format
        println ("${dayCreated},${timeCreated}")
    }
}

println ""
